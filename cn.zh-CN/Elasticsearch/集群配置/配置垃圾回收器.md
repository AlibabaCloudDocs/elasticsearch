---
keyword: [配置es垃圾回收器, CMS垃圾回收器, G1垃圾回收器]
---

# 配置垃圾回收器

阿里云Elasticsearch 6.7.0及以上版本的实例（数据节点内存大于等于32GB）提供了垃圾回收器的配置功能，支持**CMS垃圾回收器**和**G1垃圾回收器**的相互切换。本文介绍如何配置垃圾回收器。

创建阿里云Elasticsearch实例，具体操作请参见[创建阿里云Elasticsearch实例](/cn.zh-CN/Elasticsearch/实例管理/创建阿里云Elasticsearch实例.md)。实例要求如下：

-   版本：6.7.0及以上
-   数据节点内存：大于等于32GB

如果不满足要求，可升级实例规格。具体操作，请参见[升配集群](/cn.zh-CN/Elasticsearch/升降配实例/升配集群.md)。

**说明：** 不满足以上要求的实例只能使用**CMS垃圾回收器**，不支持切换为**G1垃圾回收器**。

## 操作步骤

1.  登录[阿里云Elasticsearch控制台](https://elasticsearch.console.aliyun.com/#/home)。

2.  在左侧导航栏，单击**Elasticsearch实例**。

3.  在顶部菜单栏处，选择资源组和地域，然后在**实例列表**中单击目标实例ID。

4.  在左侧导航栏，单击**ES集群配置**。

5.  在**基础配置**区域，单击**垃圾回收器**右侧的**修改**。

    实例需满足以下要求，才可修改垃圾回收器配置：

    -   版本：6.7.0及以上
    -   数据节点内存：大于等于32GB
    **警告：** 以下步骤会触发集群重启。目前阿里云Elasticsearch集群重启是采用滚动重启的方式。在集群状态正常（绿色）、索引至少包含1个副本的情况下，如果资源使用率也不是特别高（可在[集群监控](/cn.zh-CN/Elasticsearch/集群监控报警/集群监控指标说明.md)页面查看，例如节点CPU使用率为80%左右，节点HeapMemory使用率为50%左右，节点load\_1m低于当前数据节点的CPU核数），那么集群在重启期间能够持续提供服务。但建议在业务低峰期操作。

6.  在**修改配置**页面，选择**G1回收器**，单击**确定**。

    ![切换垃圾回收器](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/3746359951/p57961.png)

    确定后，集群会自动重启。重启成功后，即可完成垃圾回收器的切换。


## 相关文档

[UpdateAdvancedSetting](/cn.zh-CN/API参考/Elasticsearch/集群配置/UpdateAdvancedSetting.md)

