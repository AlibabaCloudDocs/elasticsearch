# 创建专有网络和虚拟交换机

阿里云Elasticsearch（简称ES）仅支持专有网络，因此您在购买阿里云ES前，需要先创建专有网络VPC（Virtual Private Cloud）和虚拟交换机。

创建专有网络VPC和虚拟交换机的具体步骤请参见[搭建IPv4专有网络](/cn.zh-CN/快速入门/搭建IPv4专有网络.md)。

在创建过程中，请注意：

-   如果您需要通过阿里云ECS来访问阿里云ES实例，那么阿里云ES实例与ECS实例所在的区域必须相同，并且需要满足：
    -   如果ECS实例为VPC网络，那么阿里云ES实例与ECS实例的VPC必须相同。
    -   如果阿里云ECS实例和阿里云ES实例在同一个专有网络VPC内，并且在同一个区域，但不在同一个可用区，需要您在专有网络VPC中创建对应可用区的虚拟交换机来保证网络是可以访问的。
-   **虚拟交换机**下拉列表只能显示指定VPC下，与阿里云ES实例在同一可用区下的虚拟交换机。
    -   如果指定VPC下，不存在相同可用区的虚拟交换机，请先创建一个相同可用区的虚拟交换机，详情请参见[创建交换机](/cn.zh-CN/快速入门/搭建IPv4专有网络.md)。
    -   虚拟交换机剩余可用IP个数至少包含50个，否则会提示**私有IP数量不足**。

