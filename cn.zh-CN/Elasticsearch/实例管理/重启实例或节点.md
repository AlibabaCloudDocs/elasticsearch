---
keyword: [重启ES实例, 重启ES节点]
---

# 重启实例或节点

当您修改了实例或节点的配置或进行其他操作时，可能需要重启阿里云Elasticsearch实例或节点才能生效。本文介绍如何通过控制台重启阿里云Elasticsearch实例或节点。

-   确保实例的**状态**为**正常**（绿色）、索引至少包含1个副本、资源使用率不是很高。

    **说明：** 资源使用率可在**集群监控**页面查看，例如**节点CPU使用率**为80%左右，**节点HeapMemory使用率**为50%左右，**节点load\_1m**低于当前数据节点的CPU核数。详细信息，请参见[集群监控指标说明](/cn.zh-CN/Elasticsearch/集群监控报警/集群监控指标说明.md)。

-   [登录Kibana控制台](/cn.zh-CN/Elasticsearch/可视化控制/Kibana/登录Kibana控制台.md)，执行以下命令，检查集群中是否存在状态为close的索引。如果存在，需要open或delete对应索引，否则变更不成功。
    -   查看索引状态

        ```
        GET /_cat/indices?v
        ```

        ![查看索引状态](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/7521954161/p244657.png)

    -   open状态为close的索引

        ```
        POST /<index_name>/_open
        ```

    -   delete状态为close的索引

        **警告：** 索引删除后不可恢复，请谨慎操作。

        ```
        DELETE /<index_name>
        ```


## 重启实例

1.  登录[阿里云Elasticsearch控制台](https://elasticsearch.console.aliyun.com/#/home)。

2.  在左侧导航栏，单击**Elasticsearch实例**。

3.  在顶部菜单栏处，选择资源组和地域，然后在**实例列表**中单击目标实例ID。

4.  在**基本信息**页面，单击右上角的**重启**。

5.  在**重启**对话框中，配置重启参数。

    ![重启ES实例](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/5287659951/p81252.png)

    **说明：** 如果集群整体负载不高且索引存在副本分片，一般情况下重启过程中可对外持续提供服务。但在某些场景下，重启过程中可能会出现访问超时，例如强制重启并发度高、集群负载很高并且已经存在集群访问不可用的情况、没有副本分片、在重启或强制重启过程中存在大量的写入和查询等场景，建议重启前先在客户端设计好重试机制。

    |参数|说明|
    |--|--|
    |**操作类型**|支持**实例重启**和**节点重启**：     -   **实例重启**：重启实例中所包含的所有节点。
    -   **节点重启**：重启所选的单个节点，详情请参见[重启节点](#section_ed1_ce1_s6k)。 |
    |**重启方式**|支持**重启**和**强制重启**：     -   **重启**：当实例的**状态**为**正常**（绿色）时，才可进行重启，否则需要进行强制重启。实例在重启过程中可持续提供服务（需要首先满足上文的前提条件），但耗时较长。

**说明：**

        -   节点在重启期间，对应的CPU和内存使用率会存在临时突增的情况，可能会造成服务抖动，正常情况下过一段时间后会恢复正常。
        -   目前阿里云Elasticsearch实例的重启耗时与实例的数据总量、节点数量、总索引数量和分片数量等因素有关。您可以在[任务列表](/cn.zh-CN/Elasticsearch/实例管理/查看实例任务进度详情.md)中查看实例的重启进度。
    -   **强制重启**：当实例显示为非正常状态（黄色或红色），此时将不支持重启操作，需要对实例进行强制重启。

**说明：** 当磁盘的使用率超过`cluster.routing.allocation.disk.watermark.low`的配置时，可能会导致Elasticsearch实例的**状态**变为非正常状态（黄色或红色）。当实例处于非正常状态时，不建议对实例进行节点扩容、磁盘扩容、重启、修改密码或其他变更配置类的操作，请务必保证实例的**状态**变为**正常**（绿色）后再进行这些操作。 |
    |**设置并发度**|通过设置并发度可提升实例的强制重启速度。并发值越高，强制重启越快，默认是：1/实例总节点数。|
    |**预计所需总时间**|按照前一次单节点重启时间的均值，乘以总节点个数进行评估。可能存在误差，实际以真实重启时间为准。|

6.  单击**确认**开始重启实例。

    **说明：** 如果是强制重启，需要先勾选**确认要强制重启**，进行重启确认。

    重启过程中，实例**状态**显示为**生效中**（黄色），可在**任务列表**中查看重启进度。重启成功后，实例**状态**显示为**正常**（绿色）。

    ![重启实例状态](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/6287659951/p59938.png)


## 重启节点

重启节点是指重启所选的单个节点。操作方法和注意事项与[重启实例](#section_rc0_xb0_vnt)类似，不同之处包含以下几点。

![节点重启](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/6287659951/p75998.png)

-   需要在**重启**对话框中，选择**操作类型**为**节点重启**。
-   需要选择待重启的节点。

    **说明：** 当实例处于非正常状态时，单节点也需要进行强制重启。

-   提供了**蓝绿变更**功能。勾选**蓝绿变更**后进行重启，阿里云Elasticsearch会在集群中添加一个新节点，将原节点上的数据迁移到新节点后，再将原节点删除。当集群中单个节点出现硬件故障时，通过**蓝绿变更**功能，可以将故障节点移出集群。

    **警告：**

    -   请确保实例处于**正常**（绿色）状态，以正常的方式触发**蓝绿变更**重启。使用**蓝绿变更**时，不允许对实例进行**强制重启**。
    -   勾选**蓝绿变更**后进行重启时，会导致节点IP地址发生变化，请确认后再进行操作。

