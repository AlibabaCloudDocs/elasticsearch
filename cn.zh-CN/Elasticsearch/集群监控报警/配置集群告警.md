---
keyword: es监控报警
---

# 配置集群告警

阿里云Elasticsearch支持监控实例，以及自定义报警阈值和接收报警信息。为避免出现集群状态不正常、节点磁盘使用率过高等问题影响Elasticsearch服务，强烈建议您配置监控报警，实时监控集群状态、节点磁盘使用率等信息，及时查收报警通知，提前做好防御措施。本文介绍如何为Elasticsearch实例配置报警，包括一键报警和云监控报警。

## 开启一键报警

阿里云Elasticsearch的一键报警功能由云监控提供，开启后会创建集群状态异常、节点磁盘使用率异常（\>75%）、节点JVM Heap异常（\>85%）等报警规则，作用于阿里云账号下的全部阿里云Elasticsearch实例。

1.  登录[阿里云Elasticsearch控制台](https://elasticsearch.console.aliyun.com/#/home)。

2.  在左侧导航栏，单击**Elasticsearch实例**。

3.  在实例列表中，单击**一键报警**。

4.  在**一键报警**对话框中，单击**前往开启**（默认为关闭状态）。

    ![开启ES一键报警](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/8846359951/p60297.png)

5.  在云监控控制台中，打开**Elasticsearch**服务的**一键报警**开关。

    ![云监控控制台开启一键报警](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/8846359951/p60300.png)

6.  返回阿里云Elasticsearch控制台，查看是否已经成功开启**一键报警**功能。

    1.  在实例列表中，单击目标实例ID。

    2.  在左侧导航栏，单击**集群监控**。

    3.  在**集群告警**区域，查看**一键报警**的状态。

        如果**一键报警**为**已开启**状态，表示您已经成功开启了一键报警。

        ![一键告警为开启状态](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/4966073161/p40147.png)


## 配置云监控报警

1.  进入[云监控控制台](https://cloudmonitor.console.aliyun.com/#/cloud/buckets/elasticsearch/)。

    **说明：** 您也可以在Elasticsearch实例列表中，单击目标实例ID。在**基本信息**页面，单击右上角的**集群监控**，进入云监控控制台。

2.  在左侧导航栏，选择**报警服务** \> **报警规则**。

3.  单击**创建报警规则**。

4.  在**创建报警规则**页面，设置报警规则。

    以添加**节点磁盘使用率**监控、**集群状态**监控、**节点HeapMemory使用率**监控为例，添加方式如下。

    ![关联资源](../images/p39986.png "关联资源")

    ![设置报警规则](../images/p39987.png "设置报警规则")

    您可以按照以下说明，配置阿里云Elasticsearch的监控报警项。监控指标的更多信息，请参见[查看集群监控](/cn.zh-CN/Elasticsearch/集群监控报警/集群监控指标说明.md)。

    |监控项|说明|
    |---|--|
    |集群状态|必选。主要监控集群状态为正常（绿色）还是非正常（黄色或红色）。集群状态对应Green、Yellow、Red，转换成数值对应0.0、1.0、2.0，所以在配置**集群状态**报警指标时，需要按照对应数值的大小配置。 |
    |节点磁盘使用率（%）|必选。报警阈值控制在75%以下，不要超过80%。|
    |节点HeapMemory使用率（%）|必选。报警阈值控制在85%以下，不要超过90%。|
    |节点CPU使用率（%）|可选。报警阈值控制在95%以下，不要超过95%。|
    |节点Load\_1m|可选。以CPU核数的80%为参考值。|
    |集群查询QPS（Count/Second）|可选。以实际测试结果作为参考。|
    |集群写入QPS（Count/Second）|可选。以实际测试结果作为参考。|
    |FullGc次数（个）|可选。当数值不为0时，服务异常。|
    |Exception次数（个）|可选。当数值不为0时，服务异常。|
    |快照状态|可选。当数值为-1或0时，服务正常；为2时，服务异常。|

    **说明：** **通道沉默周期**指同一个指标在一定时间范围内，只会触发一次报警。其他参数说明，请参见[创建阈值报警规则](/cn.zh-CN/报警服务/报警规则/创建阈值报警规则.md)。

5.  配置告警**通知方式**，选择**云账号报警联系人**。

    如果您还没有报警联系组，可单击**快速创建联系人组**创建。

    ![快速创建联系人组](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/6335001061/p39988.png)

    **说明：** 您可以在**报警回调**中填写可通过公网访问的URL，云监控会将报警信息通过POST请求推送到该地址，目前仅支持HTTP协议。

6.  单击**确认**。

    配置完成后，实例的监控信息将在实例正常运行后开始采集，并在集群监控页面展示监控信息。


