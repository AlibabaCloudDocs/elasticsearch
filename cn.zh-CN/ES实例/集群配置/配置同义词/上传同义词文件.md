---
keyword: es同义词
---

# 上传同义词文件

阿里云Elasticsearch支持上传自定义的同义词文件。该文件作用于Elasticsearch的同义词库后，新的索引将会采用更新后的词库进行搜索。

## 注意事项

在上传同义词文件时，请注意：

-   上传同义词文件操作会触发集群重启，在重启过程中后台会进行同义词词典的下发，生效时间与集群中节点的数量相关。
-   假设现存索引`index-aliyun`使用了aliyun.txt同义词文件，当aliyun.txt文件内容变更并重新上传后，现存索引不会动态加载更新后的同义词词典。请在同义词词典内容发生变化后进行索引重建操作，否则可能会造成只有新增数据使用新词典的情况。
-   同义词文件要求每行只有一个同义词表达式，保存为UTF-8编码的TXT文件，示例如下。

    ```
    西红柿,番茄 =>西红柿,番茄
    社保,公积金 =>社保,公积金
    ```

-   如果停用词中包含同义词文件中指定的词，上传同义词文件或进行其他操作时，主日志中会出现错误信息。

## 操作步骤

1.  登录[阿里云Elasticsearch控制台](https://elasticsearch.console.aliyun.com/#/home)。

2.  在左侧导航栏，单击**Elasticsearch实例**。

3.  在顶部菜单栏处，选择资源组和地域，然后在**实例列表**中单击目标实例ID。

4.  在左侧导航栏，单击**ES集群配置**。

5.  在**基础配置**区域，单击**同义词配置**右侧的**上传**。

6.  在**同义词配置**页面，选择上传同义词文件的方式，并按照以下说明上传同义词文件（按照[同义词配置规则](/cn.zh-CN/ES实例/集群配置/配置同义词/同义词配置规则.md)生成的TXT文件）。

    ![配置同义词](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/2746359951/p60220.png)

    -   **上传文件**：单击**上传文件**，在本地选择您要上传的同义词文件。
    -   **OSS文件上传**：输入Bucket名称和同义词文件名称，单击**添加**。

        请确保Bucket与当前Elasticsearch实例在同一区域下，且文件为TXT格式。

7.  单击**保存**。


等待实例的状态变为正常后，登录Kibana控制台创建索引、校验同义词，并上传测试数据进行搜索测试。创建索引时需要配置settings和mapping，并且需要在settings中配置`"synonyms_path": "analysis/your_dict_name.txt"`。详细信息，请参见[配置同义词](/cn.zh-CN/ES实例/集群配置/配置同义词/配置同义词.md)以及官方[Using Synonyms](https://www.elastic.co/guide/en/elasticsearch/guide/2.x/using-synonyms.html)文档。

