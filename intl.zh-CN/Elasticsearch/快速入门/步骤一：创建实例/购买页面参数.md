# 购买页面参数

当您需要购买阿里云Elasticsearch（简称ES）实例时，可参考本文的说明选择实例配置。

## 付费模式

阿里云ES支持**包年包月**和**按量付费**两种购买方式，请根据需求选择合适的方式：

-   **按量付费**：在前期程序研发或功能测试期间，建议购买**按量付费**类型的阿里云ES实例进行测试。

    支持在控制台手动单击**更多** \> **释放实例**释放ES实例。

-   **包年包月**：目前在购买包年包月类型的阿里云ES时，可以享受优惠条件。购买后，不支持退款。

    支持手动续费和自动续费，详情请参见[开通自动续费](/intl.zh-CN/产品定价/续费/开通自动续费.md)和[续费](/intl.zh-CN/产品定价/手动续费实例.md)。不支持在控制台手动释放实例。


## 基本配置

|参数|说明|
|--|--|
|**实例类型**|支持**通用商业版**。|
|**Elasticsearch版本**|支持7.10、7.7、6.8、6.7、6.3、5.6和5.5版本。 **说明：**

-   自2021年5月起，阿里云Elasticsearch关闭新购7.4版本的功能，存量集群使用不受到影响，推荐使用7.10版本。
-   建议您选择高版本实例。各版本间会存在一些性能优化和缺陷修复上的差异，具体差异请参见各版本的[Release Note](https://www.elastic.co/guide/en/elasticsearch/reference/6.8/es-release-notes.html)。 |
|**地域**|详情请参见下文的[地域和可用区](#section_9b2_83l_qmy)。|
|**可用区**|详情请参见下文的[地域和可用区](#section_9b2_83l_qmy)。|
|**可用区数量**|-   **单可用区**：普通部署模式，适用于非关键任务型工作（默认）。
-   **两个可用区**：跨可用区容灾部署模式，适用于生产型工作。
-   **三个可用区**：高可用部署模式，适用于具有更高可用性要求的生产型工作。

**说明：**

-   目前仅杭州、北京、上海和深圳四个区域支持跨三个可用区的部署。
-   部署跨可用区的阿里云ES实例时，不需要您手动选择多个可用区，系统会自动配置对应个数的可用区。
-   关于部署和使用跨可用区实例时的相关注意事项，请参见[部署和使用跨可用区实例](/intl.zh-CN/Elasticsearch/部署和使用跨可用区实例.md)。 |
|**网络类型**|目前仅支持**专有网络**。|
|**专有网络**|选择对应区域下的专有网络VPC（Virtual Private Cloud）。 **说明：** 如果您需要通过阿里云ECS实例访问阿里云ES实例，且该阿里云ECS实例是VPC网络，则您的阿里云ES实例必须与阿里云ECS实例在同一个VPC下。 |
|**虚拟交换机**|只能显示指定专有网络VPC下，与阿里云ES实例在同一可用区下的虚拟交换机。|

## 地域和可用区

阿里云ES支持的[地域和可用区](#section_9b2_83l_qmy)如下。

|国家或大区|地域|可用区|
|-----|--|---|
|中国|华东 1（杭州）|可用区K、可用区I、可用区J、可用区H、可用区G、可用区F、可用区E|
|华北 2（北京）|可用区K、可用区J、可用区I、可用区H、可用区G、可用区F、可用区E、可用区D、可用区C|
|华东 2（上海）|可用区L、可用区G、可用区F、可用区E、可用区D、可用区B|
|华南 1（深圳）|可用区F、可用区E、可用区D、可用区C、可用区B、可用区A|
|华北1（青岛）|可用区B、可用区C|
|华北3（张家口）|可用区B、可用区A|
|中国（香港）|可用区D、可用区C、可用区B|
|亚太|新加坡|可用区C、可用区B、可用区A|
|马来西亚（吉隆坡）|可用区B、可用区A|
|日本（东京）|可用区B、可用区A|
|澳大利亚（悉尼）|可用区B、可用区A|
|印度尼西亚（雅加达）|可用区B、可用区A|
|欧洲与美洲|美国（弗吉尼亚）|可用区B、可用区A|
|美国（硅谷）|可用区B、可用区A|
|德国（法兰克福）|可用区B、可用区A|
|中东与印度|印度（孟买）|可用区B、可用区A|

## 实例

|参数|说明|
|--|--|
|**数据节点规格**|[数据节点](https://www.elastic.co/guide/en/elasticsearch/reference/6.3/modules-node.html#data-node)是存储索引数据的节点，主要对文档进行增删改查、聚合等操作。数据节点对CPU、内存和IO要求较高， 在优化集群性能时需要监控数据节点的状态。当资源不足时，建议在集群中添加新的数据节点。 数据节点支持2核4G、2核8G等规格。

**说明：**

-   受规格库存及性能稳定性影响，自2021年5月起，阿里云Elasticseaech去掉新购1核2 GB和2核2 GB规格的数据节点的功能，存量节点使用不受到影响。
-   1核2 GB规格实例只适合于测试场景，不适用于生产环境。根据产品SLA协议不在售后保障范围内，建议您尽快将1核2 GB规格升级至高规格。 |
|**数据节点数量**|表示需要购买几个数据节点。 默认数据节点数量为3个，支持更改，可选范围为2~50个。 **说明：** 至少需要购买2个数据节点，但2个数据节点的集群有脑裂风险，需谨慎选择。 |
|**专有主节点**|[专有主节点](https://www.elastic.co/guide/en/elasticsearch/reference/6.3/modules-node.html?spm=a2c4g.11186623.2.32.10461b96Q7gfNV#master-node)的主要功能是对集群进行操作，例如创建或删除索引，跟踪哪些节点是集群的一部分，并决定哪些分片分配给相关的节点。稳定的主节点对集群的健康是非常重要的，默认情况下任何一个集群中的节点都有可能被选为主节点。索引数据和搜索查询等操作会占用大量的CPU、内存和IO资源，为了确保集群的稳定性，建议您购买专有主节点，将主节点和数据节点进行分离。 对单可用区实例，专有主节点默认为未启用状态，对多可用区实例默认为启用状态。您可以在购买阿里云ES时，启用专有主节点后进行购买，或在[升配集群](/intl.zh-CN/Elasticsearch/升降配实例/升配集群.md)时进行购买或升配。购买后，系统将按照对应规格的定价进行计费，各规格价格详情请参见[产品定价](https://www.alibabacloud.com/product/elasticsearch)。

**说明：**

-   专有主节点可提高服务稳定性，建议您购买。
-   已购买的专有主节点，暂不支持取消。
-   当购买数据节点大于等于10个后，默认不会开启专有主节点，需要您自行购买。
-   在[升配集群](/intl.zh-CN/Elasticsearch/升降配实例/升配集群.md)时，如果之前的专有主节点是系统为您赠送的，在升配后将变为计费模式。
-   如果在创建阿里云ES实例时已经购买了专有主节点，且集群升配页面中的专有主节点为开启状态，表示您之前购买的专有主节点规格是1核2G。

启用专有主节点后，支持配置以下参数：

-   **专有主节点数量**

默认为3个，暂不可更改。

-   **专有主节点规格**

默认规格为2核8G（最低规格），可更改。

**说明：** 已购买的专有主节点规格，暂不支持降配。

-   **专有主节点存储类型**

默认为SSD云盘，暂不可更改。

-   **专有主节点存储空间**

默认为20GB，暂不可更改。 |
|**协调节点**|[协调节点](https://www.elastic.co/guide/en/elasticsearch/reference/6.3/modules-node.html?spm=a2c4g.11186623.2.36.10461b96Q7gfNV#coordinating-only-node)可以分担数据节点的CPU开销，从而提高处理性能和服务稳定性。如果您的业务是CPU密集型的业务，建议您购买协调节点。例如存在较多的聚合查询之类的操作，详情请参见[ES官方节点类型](https://www.elastic.co/guide/en/elasticsearch/reference/6.3/modules-node.html)。 协调节点默认未启用。您可以在购买阿里云ES时，启用协调节点后进行购买，或在[升配集群](/intl.zh-CN/Elasticsearch/升降配实例/升配集群.md)时进行购买或升配。购买后，系统将按照对应规格的定价进行计费，各规格价格详情请参见[产品定价](https://www.alibabacloud.com/product/elasticsearch)。

**说明：** 已购买的协调节点，暂不支持取消。

启用协调节点后，支持配置以下参数：

-   **协调节点数量**

默认为2个，可更改，可选范围为2~25个。

-   **协调节点规格**

默认为2核8G，可更改。

**说明：** 已购买的协调节点规格，暂不支持降配。

-   **协调节点存储类型**

默认为高效云盘，暂不可更改。

-   **协调节点存储空间**

默认为20GB，暂不可更改。 |
|**冷数据节点**|如果您的业务上同时存在以下2种类型的数据索引，建议购买冷数据节点进行冷热数据分离。冷热集群架构可以提高ES的处理性能和服务稳定性（详情请参见[ES 5.x中的Hot-Warm架构](https://www.elastic.co/cn/blog/hot-warm-architecture-in-elasticsearch-5-x?spm=a2c4g.11186623.2.34.10461b96Q7gfNV)）。 -   查询频率高或写入压力大的索引。
-   查询频率低基本无写入的索引（通常为历史数据索引）。

冷数据节点默认未启用。您可以在购买阿里云ES时，启用冷数据节点后进行购买，或在[升配集群](/intl.zh-CN/Elasticsearch/升降配实例/升配集群.md)时进行购买或升配。购买后，系统将按照对应规格的定价进行计费，各规格价格详情请参见[产品定价](https://www.alibabacloud.com/product/elasticsearch)。

**说明：** 已购买的冷数据节点，暂不支持取消。

当您购买了冷数据节点后，系统会在节点启动参数中加入`-Enode.attr.box_type`，如下所示：

-   数据节点：`-Enode.attr.box_type=hot`
-   冷数据节点：`-Enode.attr.box_type=warm`

启用冷数据节点后，支持配置以下参数：

-   **冷数据节点数量**

默认为2个，可更改，可选范围为2~25个。

-   **冷数据节点规格**

默认为2核8G，可更改。

**说明：** 已购买的冷数据节点规格，暂不支持降配。

-   **冷数据节点存储类型**

默认为高效云盘，暂不可更改。

-   **冷数据节点云盘加密**

使用云盘加密，您的业务和应用程序无须进行额外的改动，就能够最大限度保护您的数据安全（可能会对ES的服务性能造成较小影响）。并且云盘加密为免费功能，您在磁盘上的任何读写操作不会产生额外的费用。

-   **冷数据节点存储空间**

最小为500GB，可更改。 |
|**Kibana节点**|默认为启用状态，不可更改。|
|**Kibana节点规格**|阿里云默认为您赠送一个**1核2 G**规格的Kibana节点。同时支持购买更高规格Kibana节点。|
|**登录名**|默认使用elastic账号，访问阿里云ES实例服务和登录Kibana控制台。 **说明：** 如果程序中指定elastic账号访问阿里云ES服务，后续在修改elastic账号对应密码后需要一些时间来生效，在密码生效期间会影响服务访问，因此不建议通过elastic来访问。建议在Kibana控制台中创建一个符合预期的Role角色用户进行访问，详情请参见[创建角色](/intl.zh-CN/访问控制/Kibana角色管理/创建角色.md)和[创建用户](/intl.zh-CN/访问控制/Kibana角色管理/创建用户.md)。 |
|**密码**|elastic账号对应的密码，不可为空。|

## 存储

|参数|说明|
|--|--|
|**存储类型**|支持**SSD云盘**和**高效云盘**： -   **SSD云盘**（默认）：支持最大2T的存储空间，适合拥有高IOPS，适合数据响应度较高的在线分析和搜索场景。
-   **高效云盘**：提供较为低廉的存储能力，适合大规模数据量的日志及分析场景。

**说明：** 2.5TB以上的高效云盘通过磁盘阵列及RAID 0的方式提供服务，不支持扩容。 |
|**云盘加密**|使用云盘加密，您的业务和应用程序无须进行额外的改动，就能够最大限度保护您的数据安全（可能会对ES的服务性能造成较小影响）。并且云盘加密为免费功能，您在磁盘上的任何读写操作不会产生额外的费用。 **说明：**

-   只能加密云盘，不能加密本地盘。
-   已经存在的非加密盘，不能直接转换成加密盘。
-   已经加密的云盘，不能转换为非加密云盘。
-   在[升配集群](/intl.zh-CN/Elasticsearch/升降配实例/升配集群.md)时，无法对已购的云盘进行**云盘加密**的变更；但您在新购冷数据节点及云盘时，可以选择为云盘加密。 |
|**单节点存储空间**|单节点的存储空间与节点的存储类型有关。 -   **SSD云盘**：最大存储空间支持2048Gib（2T）。
-   **高效云盘**：
    -   在阿里云ES实例的购买页面，最大支持5120Gib（5T），超过2048Gib时，只能取：2560、3072、3584、4096、4608、5120。
    -   已购买成功的阿里云ES实例，如果当前磁盘存储空间小于2T，则扩容磁盘时最大只能扩容到2T。如果当前磁盘存储空间超过2T，则不支持磁盘扩容。 |

## 购买量

|参数|说明|
|--|--|
|**购买时长**|仅**包年包月**类型的实例可选。默认购买时长为1个月，可选择1~9月、1~3年。|
|**自动续费**|仅**包年包月**类型的实例可选。支持设置自动续费功能（默认关闭）。 -   可在购买页面通过勾选**自动续费**开启。
-   已经购买的**包年包月**类型的阿里云ES实例，可在[续费管理](https://renew.console.aliyun.com/center#/renew/elasticsearchpre)中手动开启，详情请参见[开通自动续费](/intl.zh-CN/产品定价/续费/开通自动续费.md)。

**说明：**

    -   按月购买：自动续费周期为1个月。
    -   按年购买：自动续费周期为1年。 |

## 节点类型说明

下表为当前阿里云ES支持的节点类型。

|节点类型|描述|
|----|--|
|[数据节点](https://www.elastic.co/guide/en/elasticsearch/reference/6.3/modules-node.html#data-node)|若有专有主节点，则只作为数据节点。若没有专有主节点，则既作为数据节点，又作为专有主节点。|
|[专有主节点](https://www.elastic.co/guide/en/elasticsearch/reference/6.3/modules-node.html#master-node)|仅作为专有主节点。|
|[协调节点](https://www.elastic.co/guide/en/elasticsearch/reference/6.3/modules-node.html#coordinating-only-node)|仅作为协调节点。|
|[冷数据节点](https://www.elastic.co/cn/blog/hot-warm-architecture-in-elasticsearch-5-x?spm=a2c4g.11186623.2.35.44ca610bMs12U2)|若没有专有主节点，则既作为数据节点，又作为专有主节点。若有专有主节点，则只作为数据节点。|

